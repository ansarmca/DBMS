-- 
-- Roll No: 26
-- Name: K ANSAR
-- Program: 03
-- 


--
-- Table structure for table librarians
--

CREATE TABLE librarians ( librarianid INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(50) NOT NULL, email VARCHAR(100) UNIQUE NOT NULL, phone VARCHAR(10) UNIQUE NOT NULL);


--
-- Table structure for table bookissues
--
ALTER TABLE bookissues ADD COLUMN librarianid INT;


--
-- Dumping data for table librarians
--

INSERT INTO librarians (librarianid, name, email, phone)
VALUES
    (1, 'John Smith', 'john.smith@example.com', '9876543210'),
    (2, 'Emma Brown', 'emma.brown@example.com', '8765432109'),
    (3, 'David Wilson', 'david.wilson@example.com', '7654321098'),
    (4, 'Franklin', 'franklin@example.com', '3445236778');

--
-- Dumping data for table bookissues
--

UPDATE bookissues SET librarianid = 1 WHERE bookid IN (101, 102, 103, 104, 105, 106);

--
-- SQl Query Statements
--
5)select bookissues.bookid,students.sname,books.title,librarians.name from bookissues join students on
bookissues.studentid=students.id join books on bookissues.bookid=books.bookid left join librarians on bookissues.librarianid=librarians.librarianid;

6)SELECT librarianid,name AS librarian_name, COUNT(bookid) AS total_books_issued FROM bookissuesGROUP BY) librarianid, name;


7)SELECT librarians.librarianid, librarians.name FROM librarians LEFT JOIN bookissues ON librarians.librarianid = bookissues.librarianid WHERE bookissues.bookid IS NULL;


-- -----Question number should be commented---------------#This line may be removed in the actual file
